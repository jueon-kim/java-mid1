## 🔒 불변 객체 (Immutable Object)

### 📌 불변 객체란?
불변 객체란 **한 번 생성된 이후 내부 상태(값)가 절대로 바뀌지 않는 객체를 말합니다.  
객체의 필드(상태)를 변경할 수 없기 때문에 사이드 이펙트(Side Effect)를 방지할 수 있습니다.

---

### ⚠️ 사이드 이펙트란?
여러 변수가 같은 객체를 공유(공유 참조)하고 있을 때 한 곳에서 값을 변경하면 다른 곳에도 영향을 주는 문제를 의미합니다.

불변 객체는 값을 변경할 수 없기 때문에 이러한 사이드 이펙트가 원천적으로 차단됩니다.

---

### ✅ 불변 객체의 특징

- 생성 후 객체의 내부 상태가 절대로 변경되지 않는다.
- 값을 변경하고 싶다면 새로운 객체를 만들어야 한다.
- 기존 객체를 참조하는 다른 변수에는 영향을 주지 않는다.
- 여러 쓰레드에서 동시에 접근해도 안전하다. (Thread-safe)

---

### 🔄 가변(Mutable) 객체 vs 불변(Immutable) 객체

| 구분         | 설명                                                                 |
|--------------|----------------------------------------------------------------------|
| 가변 객체     | 객체 생성 후 내부 상태가 변경될 수 있다.                             |
| 불변 객체     | 객체 생성 이후 내부 상태가 절대로 변하지 않는다.                     |

> 예시:
> - `Address` → 가변 클래스 (Mutable)
> - `ImmutableAddress` → 불변 클래스 (Immutable)
> - `String`, `Integer`, `LocalDate` 등은 자바에서 기본적으로 제공하는 불변 클래스입니다.

---

### 💡 왜 불변 객체를 사용하는가?

- ✅ 사이드 이펙트 방지: 여러 참조가 있을 때 값 변경으로 인한 예기치 않은 오류를 방지
- ✅ 멀티 쓰레드 안정성: 상태가 바뀌지 않기 때문에 동기화 없이 안전하게 사용할 수 있음
- ✅ 캐시 및 공유 객체 안정성: 여러 곳에서 공유해도 값이 바뀌지 않으므로 안전
- ✅ 값 타입(Entity 내부 등)의 안정성: JPA 등에서 값 타입 객체를 안정적으로 관리

---

### 🧠 기본형과 참조형의 차이

- 기본형 (Primitive Type)
    - 값을 공유하지 않는다.
    - 각 변수는 자신의 값을 독립적으로 가진다.
    - 예: `int`, `double`, `boolean`

- 참조형 (Reference Type)
    - 하나의 객체를 여러 변수가 참조할 수 있다.
    - 공유 참조가 가능하고, 변경 시 모든 참조에 영향을 줄 수 있다.
    - 예: `String`, `Address`, `Object`

> 따라서 참조형 데이터 타입에서는 불변 객체로 설계 하면 사이드 이펙트를 방지할 수 있습니다.

---

### 📘 정리

> 불변이라는 단순한 제약을 통해 사이드 이펙트와 같은 복잡한 문제를 효과적으로 막을 수 있습니다.  
> 클래스가 어디에, 어떻게 활용될지를 고려하며 불변 객체의 원리를 이해하고 설계해야 합니다.